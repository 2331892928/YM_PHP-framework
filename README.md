# YM框架

> YM框架是由：AMEN 一人制作，由 湮灭网络工作室 开发。  
> 此框架是php原生框架，可以随意通过 include 或 require 进行引入，无目录限制。  
> 可以通过app.use()定义路由，框架已过滤xss  
> 模板，通过模板变量，用{{}}包裹，即可实现传递变量值  
> 让更多不喜欢composer的php开发者都可随意写项目  
> 到手可用，clone到本地后，直接用任意编辑写，根据框架规则书写即可，无需任何依赖(当然运行还是要php与web服务组件 )  
## 框架优点
> - 不需要composer进行管理，让喜欢自由的人开发更加方便。
> - 路由自定义，没有定义的路由将直接报错
> - debug可定位到某一个文件/类[方法]/函数/文件/行
> - 静态文件无需再次定义路由，只需使用静态文件全局变量即可
> - 模板文件，使用render或sendFile，可使用模板变量，使用php开发后将变量传递过去即可，支持html标签,javascript传递
> - 支持params参数，跟难看的get参数说拜拜(REST_ful风格)
> - 更多优点等你发掘······

# 框架依赖版本组件
> - 为响应安全，框架放弃5.6，最低7.0
> - 若您仍想用5.6，则需更改部分即可：global define改为普通赋值，把这两个常量用到的地方改为普通变量即可
> - php >=7.0 <8.2

# 框架升级方法
> 下载最新框架，替换旧框架如下：  
> - /bin 目录
> - /app.php 文件
> - /index.php 文件

> 即可升级到最新版，如报错，请查看版本更新日志，对照修改对应部分

# 项目文档版本声明

> 当前文档版本：0.6

> 文档版本与框架最新版本号相同  

> 项目文档默认最新框架内容，如您下的框架中，没有此文档说明的类/函数等，说明不是最新版本  

# 项目运行须知

> 不支持子目录运行比如你的域名挂在在：[/www/ym] 里，但是 将本框架放在 [/www/ym/ym2] 里，然后通过: http://host/ym2 来执行，这样不可以

# 版本日志
> 0.1:框架诞生  

> 0.2: 
> - 修复路由不准问题。 
> - 修复静态文件指向本地问题，现指向host，自动判断协议
> - 新增防盗，防非法引入功能：静态文件注入了防盗防引入，只有页面加载时静态文件才有效，加载完毕静态文件失效
> - 新增YM_CLASS方法。新增系统路由不可定义
> - 新增获取query参数，/ww/dd这种，可获取ww,dd

> 0.3:
> - 修复当有get参数时路由不准问题，新增模糊路由，如：
```php
App:use('/admin','路由路径'，false);
```
> - 则直接对/admin或/admin/login等其他路由
> - 删除静态文件防盗功能，此功能发现很鸡肋
> - 对静态路由优化引入，防止输出文件类型错误
> - 删除不必要注释，这些注释会让静态文件失效
> - 优化$request->sendFile()支持静态文件全局变量
> - 优化了获取路由参数错误问题

> 0.4:
> - 优化路由策略，更快到达指定路由，优化模糊(不严格)路由算法，不浪费服务器性能
> - 对模板文件进行文件类型判断，对静态文件的类型算法进行优化
> - 增加YM_request中方法requestType，返回当前用户请求类型：put,get,post等
> - 增加静态文件类型目录：fonts data,data中可以放txt或音频文件等
> - 对DEBUG方法：error 进行了优化，可直接定位哪一个方法，哪一个类，哪一个函数，哪一个文件，第几行出的错(可开关debug:/bin/config/Config.php)
> - 更改 YM_request 类中方法名，更人性化
> - body_post->post
> - query_get->get
> - query->params
> - is_get->whetherGet

> 0.5 | 2022年7月22日:
> - 解决当有端口号运行时，导致静态文件指向错误
> - 优化数据库类，新增：multi_query,update_array,insert_array,get_row_all。优化sqlite数据库连接方式
> - rsa加密解密优化，解决密钥长度问题，自动获取密钥长度


> 0.6 | 2022年9月11日:
> - 适配PHP8.0和PHP8.1，其余暂未测试
> - 解决PHP7.4以上参数净化出错BUG
> - 增加获取IP自定义请查看文档使用方法 YM_request->ipV2(int $type,string $zdy=NULL)
> - 增加自定义错误页面YM_request->statusPage(int $response_code,string $path,array $options=[])
> - 增加获取当前日志YM_request->getLog()  
> - 修改YM_Class类的send_mail方法，增加参数：$Secure,如指定后，则指定此协议进行连接邮箱，否则根据端口自动判断。发送失败不再是直接输出页面，而是返回错误信息，1成功狗则返回错误信息  
> - 框架新增waf防火墙，可选择启用与不启用，直接注释即可，懂waf规则的可自行书写，不懂的想开的也可以保持默认，可以让自己的web程序更好的安全

#项目文档链接
> http://ym-php.rkru.cn/
